diff --git a/CMakeLists.txt b/CMakeLists.txt
index 3d06073cfe7..076d8c383ac 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -333,6 +333,11 @@ if (WIN32 AND LIBUNWIND_ENABLE_STATIC AND NOT LIBUNWIND_ENABLE_SHARED)
   add_definitions(-D_LIBUNWIND_DISABLE_VISIBILITY_ANNOTATIONS)
 endif()
 
+if (LIBUNWIND_IS_BAREMETAL)
+  add_definitions(-D_LIBUNWIND_IS_BAREMETAL)
+  add_definitions(-D_LIBUNWIND_SUPPORT_DWARF_UNWIND)
+endif()
+
 #===============================================================================
 # Setup Source Code
 #===============================================================================
diff --git a/src/assembly.h b/src/assembly.h
index 0b7d24389a4..84cb7bf2f8b 100644
--- a/src/assembly.h
+++ b/src/assembly.h
@@ -71,7 +71,7 @@
 #define HIDDEN_SYMBOL(name) .hidden name
 
 #if defined(__GNU__) || defined(__FreeBSD__) || defined(__Fuchsia__) || \
-    defined(__linux__)
+    defined(__linux__) || defined(__GENODE__)
 #define NO_EXEC_STACK_DIRECTIVE .section .note.GNU-stack,"",%progbits
 #else
 #define NO_EXEC_STACK_DIRECTIVE
